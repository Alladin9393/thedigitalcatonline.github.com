<!DOCTYPE HTML>
<!--
    Editorial by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
        <title>Python 3 OOP Part 2 - Classes and members - The Digital Cat</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <!--[if lte IE 8]><script src="http://blog.thedigitalcatonline.com/theme/js/ie/html5shiv.js"></script><![endif]-->
        <link rel="stylesheet" href="http://blog.thedigitalcatonline.com/theme/css/main.css" />

        <!-- Pygments CSS START -->
        <link rel="stylesheet" href="http://blog.thedigitalcatonline.com/theme/css/pygments/monokai.css">
        <!-- Pygments CSS END -->

        <link href="http://blog.thedigitalcatonline.com/images/TheDigitalCat_favicon_32.png" rel="icon">

        <!--[if lte IE 9]><link rel="stylesheet" href="http://blog.thedigitalcatonline.com/theme/css/ie9.css" /><![endif]-->
        <!--[if lte IE 8]><link rel="stylesheet" href="http://blog.thedigitalcatonline.com/theme/css/ie8.css" /><![endif]-->

        <!-- Google Analytics Universal -->
            <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
                ga('create', 'UA-74364524-1', 'auto');
                ga('send', 'pageview');
            </script>
        <!-- End Google Analytics Universal Code -->
    </head>
    <body>

        <!-- Wrapper -->
            <div id="wrapper">

                <!-- Main -->
                    <div id="main">
                        <div class="inner narrow">

    <header id="header">
        <a href="http://blog.thedigitalcatonline.com/category/programming/" title="Programming">Programming</a>
        <div class="align-right">        
            <a href="#series">"Python 3 OOP"</a> part 2/6
        </div>
    </header>
    

    <article class="post">
        <header class="page-header">
            <h1>Python 3 OOP Part 2 - Classes and members</h1>
        </header>

        <section id="tags" class="align-center">
            <a class="button special small" href="http://blog.thedigitalcatonline.com/categories/python/">Python</a>            <a class="button special small" href="http://blog.thedigitalcatonline.com/categories/python3/">Python3</a>            <a class="button special small" href="http://blog.thedigitalcatonline.com/categories/oop/">OOP</a>        </section>

        <section id="author" class="align-center">
                By
                <a href="http://blog.thedigitalcatonline.com/authors/leonardo-giordani/">Leonardo Giordani</a>
                <span class="separator">â€¢</span>

            Published on
            <time datetime="2014-08-20T14:00:00+02:00"> 20/08/2014</time>

        </section>

        <section id="content">
            <p>This post is available as an <strong>IPython Notebook</strong> <a href="/notebooks/Python_3_OOP_Part_2__Classes_and_members.ipynb">here</a></p>
<h2>Python Classes Strike Again</h2>
<p>The Python implementation of classes has some peculiarities. The bare truth is that in Python the class of an object is an object itself. You can check this by issuing <code>type()</code> on the class</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="go">&lt;class &#39;type&#39;&gt;</span>
</pre></div>


<p>This shows that the <code>int</code> class is an object, an instance of the <code>type</code> class.</p>
<p>This concept is not so difficult to grasp as it can seem at first sight: in the real world we deal with <em>concepts</em> using them like <em>things</em>: for example we can talk about the concept of "door", telling people how a door looks like and how it works. In this case the concept of door is the topic of our discussion, so in our everyday experience the <em>type</em> of an object is an object itself. In Python this can be expressed by saying that <em>everything is an object</em>.</p>
<p>If the class of an object is itself an instance it is a concrete object and is stored somewhere in memory. Let us leverage the <em>inspection</em> capabilities of Python and its <code>id()</code> function to check the status of our objects. The <code>id()</code> built-in function returns the memory position of an object.</p>
<p>In the first post we defined this class</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Door</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;closed&#39;</span>
</pre></div>


<p>First of all, let's create two instances of the <code>Door</code> class and check that the two objects are stored at different addresses</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door1</span><span class="p">))</span>
<span class="go">&#39;0xb67e148c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door2</span><span class="p">))</span>
<span class="go">&#39;0xb67e144c&#39;</span>
</pre></div>


<p>This confirms that the two instances are separate and unrelated.
<strong>Please note that your values are very likely to be different from the ones I got. Being memory addresses they change at every execution.</strong> The second instance was given the same attributes of the first instance to show that the two are different objects regardless of the value of the attributes.</p>
<p>However if we use <code>id()</code> on the class of the two instances we discover that the class is <em>exactly</em> the same</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="p">))</span>
<span class="go">&#39;0xb685f56c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door2</span><span class="o">.</span><span class="vm">__class__</span><span class="p">))</span>
<span class="go">&#39;0xb685f56c&#39;</span>
</pre></div>


<p>Well this is very important. In Python, a class is not just the schema used to build an object. Rather, the class is a shared living object, which code is accessed at run time.</p>
<p>As we already tested, however, attributes are not stored in the class but in every instance, due to the fact that <code>__init__()</code> works on <code>self</code> when creating them. Classes, however, can be given attributes like any other object; with a terrific effort of imagination, let's call them <em>class attributes</em>.</p>
<p>As you can expect, class attributes are shared among the class instances just like their container</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Door</span><span class="p">:</span>
    <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;brown&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;closed&#39;</span>
</pre></div>


<p>Pay attention: the <code>colour</code> attribute here is not created using <code>self</code>, so it is contained in the class and shared among instances</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
</pre></div>


<p>Until here things are not different from the previous case. Let's see if changes of the shared value reflect on all instances</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span><span class="p">))</span>
<span class="go">&#39;0xb67e1500&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span><span class="p">))</span>
<span class="go">&#39;0xb67e1500&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span><span class="p">))</span>
<span class="go">&#39;0xb67e1500&#39;</span>
</pre></div>


<h2>Raiders of the Lost Attribute</h2>
<p>Any Python object is automatically given a <code>__dict__</code> attribute, which contains its list of attributes. Let's investigate what this dictionary contains for our example objects:</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">mappingproxy({&#39;open&#39;: &lt;function Door.open at 0xb68604ac&gt;,</span>
<span class="go">    &#39;colour&#39;: &#39;brown&#39;,</span>
<span class="go">    &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;Door&#39; objects&gt;,</span>
<span class="go">    &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;Door&#39; objects&gt;,</span>
<span class="go">    &#39;__init__&#39;: &lt;function Door.__init__ at 0xb7062854&gt;,</span>
<span class="go">    &#39;__module__&#39;: &#39;__main__&#39;,</span>
<span class="go">    &#39;__doc__&#39;: None,</span>
<span class="go">    &#39;close&#39;: &lt;function Door.close at 0xb686041c&gt;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__dict__</span>
<span class="go">{&#39;number&#39;: 1, &#39;status&#39;: &#39;closed&#39;}</span>
</pre></div>


<p>Leaving aside the difference between a dictionary and a <code>mappingproxy</code> object, you can see that the <code>colour</code> attribute is listed among the <code>Door</code> class attributes, while <code>status</code> and <code>number</code> are listed for the instance.</p>
<p>How comes that we can call <code>door1.colour</code>, if that attribute is not listed for that instance? This is a job performed by the magic <code>__getattribute__()</code> method; in Python the dotted syntax automatically invokes this method so when we write <code>door1.colour</code>, Python executes <code>door1.__getattribute__('colour')</code>. That method performs the  <em>attribute  lookup</em> action, i.e. finds the value of the attribute by looking in different places.</p>
<p>The standard implementation of <code>__getattribute__()</code> searches first the internal dictionary (<code>__dict__</code>) of an object, then the type of the object itself; in this case <code>door1.__getattribute__('colour')</code> executes first <code>door1.__dict__['colour']</code> and then, since the latter raises a <code>KeyError</code> exception, <code>door1.__class__.__dict__['colour']</code></p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">Traceback  (most recent call last):</span>
<span class="go">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">KeyError: &#39;colour&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">&#39;brown&#39;</span>
</pre></div>


<p>Indeed, if we compare the objects' equality through the <code>is</code> operator we can confirm that both <code>door1.colour</code> and <code>Door.colour</code> are exactly the same object</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span> <span class="ow">is</span> <span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">True</span>
</pre></div>


<p>When we try to assign a value to a class attribute directly on an instance, we just put in the <code>__dict__</code> of the instance a value with that name, and this value masks the class attribute since it is found first by <code>__getattribute__()</code>. As you can see from the examples of the previous section, this is different from changing the value of the attribute on the class itself.</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;colour&#39;</span><span class="p">]</span>
<span class="go">&#39;red&#39;</span>
</pre></div>


<h2>Revenge of the Methods</h2>
<p>Let's play the same game with methods. First of all you can see that, just like class attributes, methods are listed only in the class <code>__dict__</code>. Chances are that they behave the same as attributes when we get them</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">open</span> <span class="ow">is</span> <span class="n">Door</span><span class="o">.</span><span class="n">open</span>
<span class="go">False</span>
</pre></div>


<p>Whoops. Let us further investigate the matter</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span>
<span class="go">&lt;function Door.open at 0xb68604ac&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">open</span>
<span class="go">&lt;function Door.open at 0xb68604ac&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">open</span>
<span class="go">&lt;bound method Door.open of &lt;__main__.Door object at 0xb67e162c&gt;&gt;</span>
</pre></div>


<p>So, the class method is listed in the members dictionary as <em>function</em>. So far, so good. The same happens when taking it directly from the class; here Python 2 needed to introduce <em>unbound methods</em>, which are not present in Python 3. Taking it from the instance returns a <em>bound method</em>.</p>
<p>Well, a <em>function</em> is a procedure you named and defined with the <code>def</code> statement. When you refer to a function as part of a class in Python 3 you get a plain function, without any difference from a function defined outside a class.</p>
<p>When you get the function from an instance, however, it becomes a bound method. The name <em>method</em> simply means "a function inside an object", according to the usual OOP definitions, while <em>bound</em> signals that the method is linked to that instance. Why does Python bother with methods being bound or not? And how does Python transform a function into a bound method?</p>
<p>First of all, if you try to call a class function you get an error</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="go">Traceback  (most recent call last):</span>
<span class="go">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">TypeError: open() missing 1 required positional argument: &#39;self&#39;</span>
</pre></div>


<p>Yes. Indeed the function was defined to require an argument called 'self', and calling it without an argument raises an exception. This perhaps means that we can give it one instance of the class and make it work</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">door1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">status</span>
<span class="go">&#39;open&#39;</span>
</pre></div>


<p>Python does not complain here, and the method works as expected. So <code>Door.open(door1)</code> is the same as <code>door1.open()</code>, and this is the difference between a plain function coming from a class an a bound method: the bound method automatically passes the instance as an argument to the function.</p>
<p>Again, under the hood, <code>__getattribute__()</code> is working to make everything work and when we call <code>door1.open()</code>, Python actually calls <code>door1.__class__.open(door1)</code>. However, <code>door1.__class__.open</code> is a plain function, so there is something more that converts it into a bound method that Python can safely call.</p>
<p>When you access a member of an object, Python calls <code>__getattribute__()</code> to satisfy the request. This magic method, however, conforms to a procedure known as <em>descriptor protocol</em>. For the read access <code>__getattribute__()</code> checks if the object has a <code>__get__()</code> method and calls this latter. So the converstion of a function into a bound method happens through such a mechanism. Let us review it by means of an example.</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span>
<span class="go">&lt;function Door.open at 0xb68604ac&gt;</span>
</pre></div>


<p>This syntax retrieves the function defined in the class; the function knows nothing about objects, but it <em>is</em> an object (remember "everything is an object"). So we can look inside it with the <code>dir()</code> built-in function</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">])</span>
<span class="go">[&#39;__annotations__&#39;, &#39;__call__&#39;, &#39;__class__&#39;, &#39;__closure__&#39;, &#39;__code__&#39;,</span>
<span class="go"> &#39;__defaults__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;,</span>
<span class="go"> &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__get__&#39;, &#39;__getattribute__&#39;, &#39;__globals__&#39;,</span>
<span class="go"> &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__kwdefaults__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;,</span>
<span class="go"> &#39;__module__&#39;, &#39;__name__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__qualname__&#39;, &#39;__reduce__&#39;,</span>
<span class="go"> &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;,</span>
<span class="go"> &#39;__subclasshook__&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span><span class="o">.</span><span class="fm">__get__</span>
<span class="go">&lt;method-wrapper &#39;__get__&#39; of function object at 0xb68604ac&gt;</span>
</pre></div>


<p>As you can see, a <code>__get__</code> method is listed among the members of the function, and Python recognizes it as a <em>method-wrapper</em>. This method shall connect the <code>open</code> function to the <code>door1</code> instance, so we can call it passing the instance alone</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span><span class="o">.</span><span class="fm">__get__</span><span class="p">(</span><span class="n">door1</span><span class="p">)</span>
<span class="go">&lt;bound method Door.open of &lt;__main__.Door object at 0xb67e162c&gt;&gt;</span>
</pre></div>


<p>and we get exactly what we were looking for. This complex syntax is what happens behind the scenes when we call a method of an instance.</p>
<h2>When Methods met Classes</h2>
<p>Using <code>type()</code> on functions defined inside classes reveals some other details on their internal representation</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">open</span>
<span class="go">&lt;function Door.open at 0xb687e074&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">open</span>
<span class="go">&lt;bound method Door.open of &lt;__main__.Door object at 0xb6f9834c&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">Door</span><span class="o">.</span><span class="n">open</span><span class="p">)</span>
<span class="go">&lt;class &#39;function&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">door1</span><span class="o">.</span><span class="n">open</span><span class="p">)</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>
</pre></div>


<p>As you can see, Python tells the two apart recognizing the first as a <em>function</em> and the second as a <em>method</em>, where the second is a function bound to an instance.</p>
<p>What if we want to define a function that operates on the class instead of operating on the instance? As we may define class attributes, we may also define <em>class methods</em> in Python, through the <code>classmethod</code> decorator. Class methods are functions that are bound to the class and not to an instance.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Door</span><span class="p">:</span>
    <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;brown&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">knock</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Knock!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;closed&#39;</span>
</pre></div>


<p>Such a definition makes the method callable on both the instance and the class</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">knock</span><span class="p">()</span>
<span class="go">Knock!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">knock</span><span class="p">()</span>
<span class="go">Knock!</span>
</pre></div>


<p>and Python identifies both as (bound) methods</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;knock&#39;</span><span class="p">]</span>
<span class="go">&lt;classmethod object at 0xb67ff6ac&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">knock</span>
<span class="go">&lt;bound method type.knock of &lt;class &#39;__main__.Door&#39;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">knock</span>
<span class="go">&lt;bound method type.knock of &lt;class &#39;__main__.Door&#39;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">Door</span><span class="o">.</span><span class="n">knock</span><span class="p">)</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">door1</span><span class="o">.</span><span class="n">knock</span><span class="p">)</span>
<span class="go">&lt;class &#39;method&#39;&gt;</span>
</pre></div>


<p>As you can see the <code>knock()</code> function accepts one argument, which is called <code>cls</code> just to remember that it is not an instance but the class itself. This means that inside the function we can operate on the class, and the class is shared among instances.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Door</span><span class="p">:</span>
    <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;brown&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">knock</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Knock!&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">paint</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">colour</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="n">colour</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;closed&#39;</span>
</pre></div>


<p>The <code>paint()</code> classmethod now changes the class attribute <code>colour</code> which is shared among instances. Let's check how it works</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;closed&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;brown&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;white&#39;</span>
</pre></div>


<p>The class method can be called on the class, but this affects both the class and the instances, since the <code>colour</code> attribute of instances is taken at runtime from the shared class.</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Door</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;yellow&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door1</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;yellow&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">door2</span><span class="o">.</span><span class="n">colour</span>
<span class="go">&#39;yellow&#39;</span>
</pre></div>


<p>Class methods can be called on instances too, however, and their effect is the same as before. The class method is bound to the class, so it works on this latter regardless of the actual object that calls it (class or instance).</p>
<h2>Movie Trivia</h2>
<p>Section titles come from the following movies: <em>The Empire Strikes Back (1980)</em>, <em>Raiders of the Lost Ark (1981)</em>, <em>Revenge of the Nerds (1984)</em>, <em>When Harry Met Sally (1989)</em>.</p>
<h2>Sources</h2>
<p>You will find a lot of documentation in <a href="http://www.reddit.com/r/Python/comments/226ahl/some_links_about_python_oop/">this Reddit post</a>. Most of the information contained in this series come from those sources.</p>
<h2>Feedback</h2>
<p>Feel free to use <a href="https://plus.google.com/u/0/111444750762335924049">the blog Google+ page</a> to comment the post. The <a href="http://github.com/TheDigitalCatOnline/thedigitalcatonline.github.com/issues">GitHub issues</a> page is the best place to submit corrections.</p>
        </section>

<section id="related-posts">
    <h2>Related Posts</h2>
    <div class="box">
        <ul>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2017/07/21/refactoring-with-test-in-python-a-practical-example/">Refactoring with tests in Python: a practical example</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2016/11/14/clean-architectures-in-python-a-step-by-step-example/">Clean architectures in Python: a step-by-step example</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2016/09/27/python-mocks-a-gentle-introduction-part-2/">Python Mocks: a gentle introduction - Part 2</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2016/04/03/abstract-base-classes-in-python/">Abstract Base Classes in Python</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2016/03/06/python-mocks-a-gentle-introduction-part-1/">Python Mocks: a gentle introduction - Part 1</a></li>
        </ul>
    </div>
</section>
<section id="series">
    <h2>Part 2 of the "Python 3 OOP" series</h2>
    <div class="box">
        <h5>Previous articles</h5>
        <ul>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-1-objects-and-types/">Python 3 OOP Part 1 - Objects and types</a></li>
        </ul>
    
        <h5>Next articles</h5>
        <ul>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-3-delegation-composition-and-inheritance/">Python 3 OOP Part 3 - Delegation: composition and inheritance</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2014/08/21/python-3-oop-part-4-polymorphism/">Python 3 OOP Part 4 - Polymorphism</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2014/09/01/python-3-oop-part-5-metaclasses/">Python 3 OOP Part 5 - Metaclasses</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/blog/2014/09/04/python-3-oop-part-6-abstract-base-classes/">Python 3 OOP Part 6 - Abstract Base Classes</a></li>
        </ul>
    </div>
</section>
    </article>


                        </div>
                    </div>

                <!-- Sidebar -->
                    <div id="sidebar">
<div class="inner">
    <!-- Menu -->
    <nav id="menu">
        <header class="major">
            <h2>Menu</h2>
        </header>
        <ul>
            <li><a href="http://blog.thedigitalcatonline.com/">Homepage</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/pages/about.html">About</a></li>
            <li><a href="http://blog.thedigitalcatonline.com/archives/">Archives</a></li>
        </ul>
    </nav>

    <!-- Feeds -->
<section>
    <header class="major">
        <h2>Feeds</h2>
    </header>
    <ul class="list-clean">
        <li><a href="http://blog.thedigitalcatonline.com/atom.xml"><i class="fa fa-rss"></i> All posts</a></li>


        <li><a href="http://blog.thedigitalcatonline.com/category/programming/atom.xml"><i class="fa fa-rss"></i> All posts in category: Programming</a></li>
    </ul>
</section>
    <!-- Recent posts -->
<section>
    <header class="major">
        <h2>Recent posts</h2>
    </header>
    <div class="mini-posts">
        <article>
            Exploring the Amiga - Part 2
            <a href="http://blog.thedigitalcatonline.com/blog/2018/05/28/exploring-the-amiga-2/"> Read</a>
        </article>
        <article>
            Exploring the Amiga - Part 1
            <a href="http://blog.thedigitalcatonline.com/blog/2018/05/28/exploring-the-amiga-1/"> Read</a>
        </article>
        <article>
            Public key cryptography: RSA keys
            <a href="http://blog.thedigitalcatonline.com/blog/2018/04/25/rsa-keys/"> Read</a>
        </article>
        <article>
            Introduction to hashing
            <a href="http://blog.thedigitalcatonline.com/blog/2018/04/06/introduction-to-hashing/"> Read</a>
        </article>
        <article>
            A game of tokens: solution - Part 3
            <a href="http://blog.thedigitalcatonline.com/blog/2017/10/31/a-game-of-tokens-solution-part-3/"> Read</a>
        </article>
    </div>
</section>
    <!-- Tags -->
<section>
    <header class="major">
        <h2>Tags</h2>
    </header>
    <ul class="list-inline list-clean" id="tags-side">
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/algorithms/">algorithms</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/amiga/">amiga</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/amqp/">AMQP</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/architectures/">architectures</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/assembly/">assembly</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/c/">C</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/clojure/">Clojure</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/compilers/">compilers</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/concurrent-programming/">concurrent programming</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/cryptography/">cryptography</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/decorators/">decorators</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/django/">Django</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/erlang/">Erlang</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/functional-programming/">functional programming</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/generators/">generators</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/git/">Git</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/metaclasses/">metaclasses</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/metaprogramming/">metaprogramming</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/notebook/">Notebook</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/oop/">OOP</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/operating-systems/">operating systems</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/pika/">Pika</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/postage/">Postage</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/python/">Python</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/python2/">Python2</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/python3/">Python3</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/rabbitmq/">RabbitMQ</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/refactoring/">refactoring</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/retroprogramming/">retroprogramming</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/rsa/">RSA</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/scala/">Scala</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/ssh/">SSH</a>
        </li>
        <li class="tag-4">
            <a href="http://blog.thedigitalcatonline.com/categories/ssl/">SSL</a>
        </li>
        <li class="tag-1">
            <a href="http://blog.thedigitalcatonline.com/categories/tdd/">TDD</a>
        </li>
        <li class="tag-2">
            <a href="http://blog.thedigitalcatonline.com/categories/testing/">testing</a>
        </li>
        <li class="tag-3">
            <a href="http://blog.thedigitalcatonline.com/categories/versioning/">versioning</a>
        </li>
    </ul>
</section>
    <!-- Section -->
<section>
    <header class="major">
        <h2>Get in touch</h2>
    </header>
    <ul class="list-clean" id="social">
        
        
        
        <li class="list-item-spaced"><a href="https://twitter.com/thedigicat"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
        
        
        
        
        <li class="list-item-spaced"><a href="https://plus.google.com/u/0/111444750762335924049"><i class="fa fa-google-plus-square fa-lg"></i> Google+</a></li>
        
        
        
        
        <li class="list-item-spaced"><a href="https://github.com/TheDigitalCatOnline"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
        
    </ul>
</section>
    <!-- Footer -->
    <footer id="footer">
        <p class="copyright">Editorial theme by: <a href="https://html5up.net">HTML5 UP</a>.</p>
    </footer>

</div>                    </div>

            </div>

        <!-- Scripts -->
            <script src="http://blog.thedigitalcatonline.com/theme/js/jquery.min.js"></script>
            <script src="http://blog.thedigitalcatonline.com/theme/js/skel.min.js"></script>
            <script src="http://blog.thedigitalcatonline.com/theme/js/util.js"></script>
            <!--[if lte IE 8]><script src="http://blog.thedigitalcatonline.com/theme/js/ie/respond.min.js"></script><![endif]-->
            <script src="http://blog.thedigitalcatonline.com/theme/js/main.js"></script>

    </body>
</html>